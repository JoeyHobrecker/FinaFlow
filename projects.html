<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Task Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="quill.snow.css">
    <link rel="stylesheet" href="style.css">
    <script src="dexie.min.js" defer></script>
    <script src="quill.min.js" defer></script>
    <script src="app.js" defer></script>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="logo-wrapper">
                <a href="index.html" class="back-btn action-btn"><i class="fas fa-arrow-left"></i> Back</a>
                <span class="logo-text">Projects & Concepts</span>
            </div>
            <div class="view-controls">
                <button id="projects-view-btn" class="view-btn active">Projects</button>
                <button id="concepts-view-btn" class="view-btn">Concepts</button>
            </div>
        </header>

        <main class="main-content-full-width">
            <!-- Concept Area -->
            <div id="concept-area" class="concept-area hidden">
                <div class="action-buttons-toolbar">
                    <button id="new-concept-btn" class="action-btn"><i class="fas fa-lightbulb"></i> New Concept</button>
                </div>
                <div class="concept-input-container hidden-by-default">
                    <input type="text" id="concept-title-input" placeholder="Concept title...">
                    <textarea id="concept-input" placeholder="Jot down your concept ideas here..."></textarea>
                    <div class="action-btn-group">
                        <button id="save-concept-btn" class="action-btn"><i class="fas fa-save"></i> Save Concept</button>
                    </div>
                </div>
                <div id="concepts-list" class="concepts-list"></div>
            </div>

            <!-- Projects Area -->
            <div id="projects-area" class="projects-area">
                <div class="projects-header">
                    <h3>Projects</h3>
                    <div class="projects-view-toggle">
                        <button id="grid-view-btn" class="view-toggle-btn action-btn active"><i class="fas fa-th-large"></i> Grid</button>
                        <button id="list-view-btn" class="view-toggle-btn action-btn"><i class="fas fa-list"></i> List</button>
                        <button id="new-project-btn" class="action-btn"><i class="fas fa-folder-plus"></i> New Project</button>
                        <button id="add-folder-btn" class="action-btn"><i class="fas fa-folder"></i> Add Folder</button>
                    </div>
                </div>
                <div id="folder-nav" class="folder-nav hidden">
                    <button id="back-folder-btn" class="back-btn action-btn"><i class="fas fa-arrow-left"></i></button>
                    <span id="current-folder-name"></span>
                    <button id="rename-folder-btn" class="action-btn"><i class="fas fa-edit"></i></button>
                    <button id="delete-folder-btn" class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                </div>
                <div class="projects-filter">
                    <input type="text" id="project-search" placeholder="Search projects...">
                    <select id="project-status-filter">
                        <option value="all">All Statuses</option>
                        <option value="active">Active</option>
                        <option value="waiting">Waiting</option>
                        <option value="storage">Storage</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>
                <div id="projects-grid" class="projects-grid"></div>
                <div id="projects-list" class="projects-list hidden"></div>
            </div>

            <!-- Project Detail View -->
            <div id="project-detail" class="project-detail hidden">
                <div class="project-detail-header">
                    <button id="back-to-projects-btn" class="back-btn action-btn"><i class="fas fa-arrow-left"></i> Projects</button>
                    <div class="project-detail-actions">
                        <button id="edit-project-btn" class="edit-project-btn action-btn"><i class="fas fa-edit"></i> Edit</button>
                        <button id="delete-project-btn" class="delete-project-btn action-btn delete-btn"><i class="fas fa-trash"></i> Delete</button>
                    </div>
                </div>
                <div class="project-detail-content">
                    <div class="project-detail-main">
                        <div class="project-detail-image" aria-label="Project image"><div class="no-image-placeholder" aria-hidden="true"><i class="fas fa-image"></i></div></div>
                        <div class="project-detail-info">
                            <h2 id="project-detail-title"></h2>
                            <div id="project-detail-status"></div>
                            <div id="project-detail-dates"></div>
                        </div>
                    </div>
                    <div class="project-detail-tabs">
                        <button id="overview-tab" class="tab-btn active">Overview</button>
                        <button id="tasks-tab" class="tab-btn">Tasks</button>
                        <button id="notes-tab" class="tab-btn">Notes</button>
                    </div>
                    <div id="overview-content" class="tab-content"><div class="overview-section"><h3>Project Description</h3><p id="project-description"></p></div></div>
                    <div id="tasks-content" class="tab-content hidden">
                        <div class="project-tasks-header"><h3>Project Tasks</h3><button id="add-project-task-btn" class="action-btn"><i class="fas fa-plus"></i> Add Task</button></div>
                        <div id="project-tasks-list" class="project-tasks-list"></div>
                    </div>
                    <div id="notes-content" class="tab-content hidden">
                        <div class="project-notes-header"><h3>Project Notes</h3><button id="add-note-btn" class="action-btn"><i class="fas fa-plus"></i> Add Note</button></div>
                        <div id="notes-grid" class="notes-grid"></div>
                    </div>
                </div>
            </div>
             <!-- Concept Detail View -->
            <div id="concept-detail" class="concept-detail hidden">
                <div class="concept-detail-header">
                    <button id="back-to-concepts-btn" class="back-btn action-btn"><i class="fas fa-arrow-left"></i> Concepts</button>
                    <div class="concept-detail-actions">
                        <button id="delete-concept-btn" class="action-btn delete-btn"><i class="fas fa-trash"></i> Delete</button>
                        <button id="concept-to-project-btn" class="action-btn concept-to-project-btn"><i class="fas fa-share-square"></i> To Project</button>
                    </div>
                </div>
                <div class="concept-detail-content">
                    <h2 id="concept-detail-title" contenteditable="true" spellcheck="false"></h2>
                    <div id="concept-detail-date"></div>
                    <div class="concept-detail-body"><textarea id="concept-detail-text" placeholder="Develop your concept here..."></textarea></div>
                    <div class="concept-detail-footer"><button id="save-concept-detail-btn" class="action-btn submit-btn"><i class="fas fa-save"></i> Save Concept</button></div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modals -->
    <div id="add-project-modal" class="modal"><div class="modal-content">
        <div class="modal-header"><h2>Add New Project</h2><span class="close-modal">&times;</span></div>
        <div class="modal-body"><form id="project-form">
            <div class="form-group"><label for="project-title">Project Title</label><input type="text" id="project-title" required></div>
            <div class="form-group"><label for="project-description-input">Description</label><textarea id="project-description-input"></textarea></div>
            <div class="form-group"><label>Project Image</label><div class="image-upload-container"><label for="project-image-upload" class="image-upload-label"><i class="fas fa-image"></i> Choose Image</label><input type="file" id="project-image-upload" class="image-upload-input" accept="image/*"><div id="image-preview" class="image-preview"></div></div></div>
            <div class="form-group"><label for="project-deadline-date">Deadline</label><input type="date" id="project-deadline-date"></div>
            <div class="form-group"><label>Status</label><div class="status-options">
                <label class="radio-container"><input type="radio" name="project-status" value="active" checked><span class="radio-label">Active</span></label>
                <label class="radio-container"><input type="radio" name="project-status" value="waiting"><span class="radio-label">Waiting</span></label>
                <label class="radio-container"><input type="radio" name="project-status" value="storage"><span class="radio-label">Storage</span></label>
                <label class="radio-container"><input type="radio" name="project-status" value="completed"><span class="radio-label">Completed</span></label>
            </div></div>
            <div class="form-actions"><button type="button" class="cancel-btn">Cancel</button><button type="submit" class="submit-btn">Add Project</button></div>
        </form></div>
    </div></div>
    <div id="edit-project-modal" class="modal"><div class="modal-content">
        <div class="modal-header"><h2>Edit Project</h2><span class="close-modal">&times;</span></div>
        <div class="modal-body"><form id="edit-project-form">
            <input type="hidden" id="edit-project-id">
            <div class="form-group"><label for="edit-project-title">Project Title</label><input type="text" id="edit-project-title" required></div>
            <div class="form-group"><label for="edit-project-description-input">Description</label><textarea id="edit-project-description-input"></textarea></div>
            <div class="form-group"><label>Project Image</label><div class="image-upload-container"><label for="edit-project-image-upload" class="image-upload-label"><i class="fas fa-image"></i> Choose Image</label><input type="file" id="edit-project-image-upload" class="image-upload-input" accept="image/*"><div id="edit-image-preview" class="image-preview"></div></div></div>
            <div class="form-group"><label for="edit-project-deadline-date">Deadline</label><input type="date" id="edit-project-deadline-date"></div>
            <div class="form-group"><label>Status</label><div class="status-options">
                <label class="radio-container"><input type="radio" name="edit-project-status" value="active"><span class="radio-label">Active</span></label>
                <label class="radio-container"><input type="radio" name="edit-project-status" value="waiting"><span class="radio-label">Waiting</span></label>
                <label class="radio-container"><input type="radio" name="edit-project-status" value="storage"><span class="radio-label">Storage</span></label>
                <label class="radio-container"><input type="radio" name="edit-project-status" value="completed"><span class="radio-label">Completed</span></label>
            </div></div>
            <div class="form-actions"><button type="button" class="delete-btn">Delete Project</button><button type="button" class="cancel-btn">Cancel</button><button type="submit" class="submit-btn">Save Changes</button></div>
        </form></div>
    </div></div>
    <div id="add-note-modal" class="modal"><div class="modal-content">
        <div class="modal-header"><h2>Add New Note</h2><span class="close-modal">&times;</span></div>
        <div class="modal-body"><form id="note-form">
            <input type="hidden" id="note-project-id">
            <div class="form-group"><label for="note-title">Note Title</label><input type="text" id="note-title" placeholder="Title for your note" required></div>
            <div class="form-group"><label for="note-content">Content</label><textarea id="note-content" class="note-textarea" placeholder="Start writing your note..."></textarea></div>
            <div class="form-group"><label for="note-tags">Tags (Comma separated)</label><input type="text" id="note-tags" placeholder="e.g. meeting, idea"></div>
            <div class="form-actions"><button type="button" class="cancel-btn">Cancel</button><button type="submit" class="submit-btn">Add Note</button></div>
        </form></div>
    </div></div>
    <div id="note-editor-overlay" class="modal"><div class="note-editor-container">
        <div class="note-editor-header">
            <h3 id="note-editor-title">Edit Note</h3>
            <button id="fullscreen-note-editor-btn" class="action-btn"><i class="fas fa-expand"></i></button>
            <button id="close-note-editor-btn" class="close-modal">&times;</button>
        </div>
        <div id="quill-editor-inner-container"></div> 
        <div class="note-editor-footer">
            <button id="delete-current-note-btn" class="delete-btn" style="margin-right: auto;"><i class="fas fa-trash"></i> Delete Note</button>
            <button id="save-edited-note-btn" class="submit-btn"><i class="fas fa-save"></i> Save Changes</button>
        </div>
    </div></div>
    <div id="project-status-change-modal" class="modal"><div class="modal-content">
        <div class="modal-header"><h2>Update Task Statuses</h2><span class="close-modal">&times;</span></div>
        <div class="modal-body">
            <p>Select which tasks should also be moved to the '<span id="project-new-status-span"></span>' status.</p>
            <div id="project-status-change-task-list"></div>
            <div class="form-actions">
                <button id="project-status-change-all-btn" class="action-btn">Select All</button>
                <button type="button" class="cancel-btn">Cancel</button>
                <button id="project-status-change-confirm-btn" type="submit" class="submit-btn">Update Selected</button>
            </div>
        </div>
    </div></div>
    <div id="toast-container"></div>
</body>
</html>
